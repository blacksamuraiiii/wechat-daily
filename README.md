# ä¼ä¸šå¾®ä¿¡æ¯æ—¥æ¶ˆæ¯æ¨é€ç³»ç»Ÿ

[![Python Version](https://img.shields.io/badge/python-3.9+-blue.svg)](https://www.python.org/)
[![License](https://img.shields.io/badge/license-MIT-green.svg)](LICENSE)

ä¸€ä¸ªåŸºäºä¼ä¸šå¾®ä¿¡çš„ä¼ä¸šçº§æ¶ˆæ¯æ¨é€ç³»ç»Ÿï¼Œæ”¯æŒæ¯æ—¥å¤©æ°”æ¨é€ã€é‚®ä»¶æ€»ç»“ã€AIå¯¹è¯ç­‰åŠŸèƒ½ã€‚

## âœ¨ åŠŸèƒ½ç‰¹æ€§

### ğŸš€ æ ¸å¿ƒåŠŸèƒ½

- **ä¼ä¸šå¾®ä¿¡æ¶ˆæ¯æ¨é€** - æ”¯æŒæ–‡æœ¬æ¶ˆæ¯æ¨é€å’Œæ¥æ”¶
- **æ¯æ—¥å¤©æ°”æ¨é€** - è‡ªåŠ¨è·å–å¤©æ°”ä¿¡æ¯å’Œé¢„è­¦
- **çƒ­ç‚¹æ–°é—»æ¨é€** - å®æ—¶è·å–å„å¤§æ–°é—»å¹³å°çƒ­ç‚¹
- **æ¯æ—¥é‡‘å¥æ¨é€** - æä¾› inspirational quotes
- **é‚®ä»¶æ™ºèƒ½æ€»ç»“** - AIåˆ†æé‚®ä»¶å†…å®¹å¹¶ç”Ÿæˆæ‘˜è¦
- **AIå¤šè½®å¯¹è¯** - åŸºäºLangChainçš„æ™ºèƒ½å¯¹è¯ç³»ç»Ÿ

### ğŸ“Š é«˜çº§ç‰¹æ€§

- **é‚®ä»¶ç»Ÿè®¡** - è‡ªåŠ¨ç»Ÿè®¡æ”¶å‘é‚®ä»¶æ•°é‡
- **æ™ºèƒ½è¿‡æ»¤** - è¿‡æ»¤è‡ªå·±å‘çš„é‚®ä»¶ï¼Œé¿å…é‡å¤åˆ†æ
- **è®°å¿†ç®¡ç†** - æ”¯æŒå¤šç”¨æˆ·å¯¹è¯è®°å¿†
- **é”™è¯¯å¤„ç†** - å®Œå–„çš„å¼‚å¸¸å¤„ç†å’Œé‡è¯•æœºåˆ¶
- **é…ç½®ç®¡ç†** - åŸºäºç¯å¢ƒå˜é‡çš„çµæ´»é…ç½®

## ğŸ› ï¸ æŠ€æœ¯æ ˆ

### åç«¯æ¡†æ¶

- **Python 3.9+** - ä¸»ç¼–ç¨‹è¯­è¨€
- **Flask** - Webæ¡†æ¶ï¼Œå¤„ç†ä¼ä¸šå¾®ä¿¡å›è°ƒ
- **LangChain** - AIå¯¹è¯å’Œè®°å¿†ç®¡ç†æ¡†æ¶

### AI & API

- **OpenAI GPT** - å¤§è¯­è¨€æ¨¡å‹ (å…¼å®¹OpenAI API)
- **ä¼ä¸šå¾®ä¿¡API** - ä¼ä¸šçº§æ¶ˆæ¯æ¨é€
- **IMAP** - é‚®ä»¶è·å–åè®®

### æ•°æ®å¤„ç†

- **BeautifulSoup4** - HTMLè§£æ
- **Requests** - HTTPå®¢æˆ·ç«¯
- **python-dotenv** - ç¯å¢ƒå˜é‡ç®¡ç†

### ä¼ä¸šå¾®ä¿¡é›†æˆ

- **WXBizMsgCrypt3** - ä¼ä¸šå¾®ä¿¡æ¶ˆæ¯åŠ è§£å¯†

## ğŸ“‹ ç¯å¢ƒè¦æ±‚

- **Python**: 3.9 æˆ–æ›´é«˜ç‰ˆæœ¬
- **æ“ä½œç³»ç»Ÿ**: Windows/Linux/macOS
- **å†…å­˜**: è‡³å°‘ 512MB
- **ç£ç›˜ç©ºé—´**: è‡³å°‘ 100MB

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. å…‹éš†é¡¹ç›®

```bash
git clone https://github.com/blacksamuraiiii/wechat-daily
cd ä¼ä¸šå¾®ä¿¡æ¯æ—¥æ¨é€
```

### 2. å®‰è£…ä¾èµ–

```bash
pip install -r requirements.txt
```

### 3. é…ç½®ç¯å¢ƒå˜é‡

```bash
# å¤åˆ¶æ¨¡æ¿æ–‡ä»¶
cp .env.template .env

# ç¼–è¾‘é…ç½®æ–‡ä»¶
nano .env  # æˆ–ä½¿ç”¨å…¶ä»–ç¼–è¾‘å™¨
```

### 4. é…ç½®è¯´æ˜

#### ä¼ä¸šå¾®ä¿¡é…ç½®

```env
# åœ¨ä¼ä¸šå¾®ä¿¡ç®¡ç†åå°è·å–
WEIXIN_CORP_ID = "ä½ çš„ä¼ä¸šID"
WEIXIN_CORP_SECRET = "ä½ çš„åº”ç”¨Secret"
WEIXIN_AGENT_ID = 1000001  # ä½ çš„åº”ç”¨AgentId
WEIXIN_TO_USER = "ç”¨æˆ·å"  # æˆ– "@all" æ¨é€ç»™æ‰€æœ‰äºº
```

#### AIé…ç½®

```env
# æ”¯æŒä»»ä½•OpenAIå…¼å®¹çš„API
AI_API_KEY = "ä½ çš„APIå¯†é’¥"
AI_BASE_URL = "https://api.openai.com/v1"
AI_MODEL = "gpt-4o-mini"
```

#### é‚®ç®±é…ç½®

```env
# ç”¨äºé‚®ä»¶æ€»ç»“åŠŸèƒ½
IMAP_SERVER = "imap.163.com"
IMAP_PORT = 993
USER_EMAIL = "your-email@163.com"
PASSWORD = "your-password"
```

### 5. è¿è¡Œåº”ç”¨

```bash
# å¯åŠ¨FlaskæœåŠ¡å™¨
python run.py
```

æœåŠ¡å™¨å°†åœ¨ `http://localhost:1111` å¯åŠ¨ã€‚

## ğŸ“¸ æ•ˆæœå±•ç¤º

### å¤©æ°”æ¨é€åŠŸèƒ½

![å¤©æ°”æ¨é€](screenshots/å¾®ä¿¡å›¾ç‰‡_å¤©æ°”æ¨é€.png)

### é‚®ä»¶æ€»ç»“åŠŸèƒ½

![é‚®ä»¶æ€»ç»“](screenshots/å¾®ä¿¡å›¾ç‰‡_é‚®ä»¶æ€»ç»“.png)

## ğŸ“– ä½¿ç”¨æŒ‡å—

### ä¼ä¸šå¾®ä¿¡é…ç½®

1. **åˆ›å»ºä¼ä¸šå¾®ä¿¡åº”ç”¨**

   - ç™»å½• [ä¼ä¸šå¾®ä¿¡ç®¡ç†åå°](https://work.weixin.qq.com/)
   - åˆ›å»ºæ–°åº”ç”¨ï¼Œè·å– `CorpID`ã€`Secret`ã€`AgentId`
2. **é…ç½®å›è°ƒURL**

   - åœ¨åº”ç”¨è®¾ç½®ä¸­é…ç½®å›è°ƒURL: `http://your-domain.com/wechat`
   - å¡«å…¥ `Token` å’Œ `EncodingAESKey`
3. **è®¾ç½®IPç™½åå•**

   - æ·»åŠ æœåŠ¡å™¨IPåˆ°ä¼ä¸šå¾®ä¿¡ç™½åå•

### åŠŸèƒ½ä½¿ç”¨

#### å¤©æ°”æ¨é€

```bash
python src/send_weather_message.py
```

#### é‚®ä»¶æ€»ç»“

```bash
python src/send_email_summary.py
```

#### AIå¯¹è¯

åœ¨ä¼ä¸šå¾®ä¿¡ä¸­ç›´æ¥å‘é€æ¶ˆæ¯å³å¯è§¦å‘AIå¯¹è¯ã€‚

### å®šæ—¶ä»»åŠ¡è®¾ç½®

å¯ä»¥ä½¿ç”¨ç³»ç»Ÿå®šæ—¶ä»»åŠ¡æˆ–Pythonçš„scheduleåº“è®¾ç½®å®šæ—¶æ¨é€ï¼š

```python
import schedule
import time

def daily_push():
    # æ‰§è¡Œå¤©æ°”æ¨é€
    os.system('python send_weather_message.py')
    # æ‰§è¡Œé‚®ä»¶æ€»ç»“
    os.system('python send_email_summary.py')

# æ¯å¤©æ—©ä¸Š8ç‚¹æ¨é€
schedule.every().day.at("08:00").do(daily_push)

while True:
    schedule.run_pending()
    time.sleep(60)
```

## ğŸ—ï¸ é¡¹ç›®ç»“æ„

```
ä¼ä¸šå¾®ä¿¡æ¯æ—¥æ¨é€/
â”œâ”€â”€ .env                    # ç¯å¢ƒå˜é‡é…ç½®
â”œâ”€â”€ .env.template          # é…ç½®æ¨¡æ¿
â”œâ”€â”€ requirements.txt       # Pythonä¾èµ–
â”œâ”€â”€ run.py                 # Flaskä¸»ç¨‹åº
â”œâ”€â”€ src/                   # æºä»£ç ç›®å½•
â”‚   â”œâ”€â”€ send_message.py        # ä¼ä¸šå¾®ä¿¡æ¶ˆæ¯æ¨é€
â”‚   â”œâ”€â”€ send_weather_message.py # å¤©æ°”æ¨é€æ¨¡å—
â”‚   â”œâ”€â”€ send_email_summary.py  # é‚®ä»¶æ€»ç»“æ¨¡å—
â”‚   â”œâ”€â”€ chat_with_llm.py       # AIå¯¹è¯æ¨¡å—
â”‚   â”œâ”€â”€ WXBizMsgCrypt.py       # ä¼ä¸šå¾®ä¿¡åŠ è§£å¯†
â”‚   â””â”€â”€ WXBizMsgCrypt3.py      # ä¼ä¸šå¾®ä¿¡åŠ è§£å¯†
â”œâ”€â”€ screenshots/            # æˆªå›¾ç›®å½•
â”‚   â”œâ”€â”€ å¾®ä¿¡å›¾ç‰‡_å¤©æ°”æ¨é€.png
â”‚   â””â”€â”€ å¾®ä¿¡å›¾ç‰‡_é‚®ä»¶æ€»ç»“.png
â””â”€â”€ README.md              # é¡¹ç›®æ–‡æ¡£
```

## ğŸ”§ é…ç½®è¯¦è§£

### ä¼ä¸šå¾®ä¿¡é…ç½®

| å‚æ•°                   | è¯´æ˜           | è·å–æ–¹å¼         |
| ---------------------- | -------------- | ---------------- |
| `sToken`             | åº”ç”¨Token      | ä¼ä¸šå¾®ä¿¡åº”ç”¨è®¾ç½® |
| `sEncodingAESKey`    | æ¶ˆæ¯åŠ è§£å¯†å¯†é’¥ | ä¼ä¸šå¾®ä¿¡åº”ç”¨è®¾ç½® |
| `WEIXIN_CORP_ID`     | ä¼ä¸šID         | ä¼ä¸šå¾®ä¿¡ç®¡ç†åå° |
| `WEIXIN_CORP_SECRET` | åº”ç”¨Secret     | ä¼ä¸šå¾®ä¿¡åº”ç”¨è®¾ç½® |
| `WEIXIN_AGENT_ID`    | åº”ç”¨AgentId    | ä¼ä¸šå¾®ä¿¡åº”ç”¨è®¾ç½® |

### AIé…ç½®

| å‚æ•°            | è¯´æ˜       | é»˜è®¤å€¼                    |
| --------------- | ---------- | ------------------------- |
| `AI_API_KEY`  | APIå¯†é’¥    | å¿…éœ€                      |
| `AI_BASE_URL` | APIåŸºç¡€URL | https://api.openai.com/v1 |
| `AI_MODEL`    | æ¨¡å‹åç§°   | gpt-4o-mini               |

### é‚®ç®±é…ç½®

| å‚æ•°            | è¯´æ˜       | ç¤ºä¾‹         |
| --------------- | ---------- | ------------ |
| `IMAP_SERVER` | IMAPæœåŠ¡å™¨ | imap.163.com |
| `IMAP_PORT`   | IMAPç«¯å£   | 993          |
| `USER_EMAIL`  | é‚®ç®±åœ°å€   | user@163.com |
| `PASSWORD`    | é‚®ç®±å¯†ç    | å¯†ç æˆ–æˆæƒç  |

## ğŸ› æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

1. **ä¼ä¸šå¾®ä¿¡æ¨é€å¤±è´¥**

   - æ£€æŸ¥ç½‘ç»œè¿æ¥
   - éªŒè¯ä¼ä¸šå¾®ä¿¡é…ç½®æ˜¯å¦æ­£ç¡®
   - ç¡®è®¤åº”ç”¨æƒé™è®¾ç½®
2. **AIå¯¹è¯æ— å“åº”**

   - æ£€æŸ¥APIå¯†é’¥æ˜¯å¦æœ‰æ•ˆ
   - éªŒè¯APIé¢åº¦æ˜¯å¦å……è¶³
   - ç¡®è®¤ç½‘ç»œèƒ½è®¿é—®AIæœåŠ¡
3. **é‚®ä»¶è·å–å¤±è´¥**

   - æ£€æŸ¥é‚®ç®±IMAPè®¾ç½®æ˜¯å¦å¼€å¯
   - éªŒè¯é‚®ç®±å¯†ç /æˆæƒç 
   - ç¡®è®¤ç½‘ç»œè¿æ¥IMAPæœåŠ¡å™¨

### æ—¥å¿—æŸ¥çœ‹

```bash
# æŸ¥çœ‹Flaskæ—¥å¿—
python run.py

# æŸ¥çœ‹æ¨¡å—æ‰§è¡Œæ—¥å¿—
python send_weather_message.py 2>&1 | tee weather.log
```

## ğŸ¤ è´¡çŒ®æŒ‡å—

1. Fork æœ¬é¡¹ç›®
2. åˆ›å»ºç‰¹æ€§åˆ†æ”¯ (`git checkout -b feature/AmazingFeature`)
3. æäº¤æ›´æ”¹ (`git commit -m 'Add some AmazingFeature'`)
4. æ¨é€åˆ°åˆ†æ”¯ (`git push origin feature/AmazingFeature`)
5. åˆ›å»º Pull Request

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ MIT è®¸å¯è¯ - æŸ¥çœ‹ [LICENSE](LICENSE) æ–‡ä»¶äº†è§£è¯¦æƒ…ã€‚

## ğŸ™ è‡´è°¢

- [ä¼ä¸šå¾®ä¿¡](https://work.weixin.qq.com/) - ä¼ä¸šçº§é€šè®¯å¹³å°
- [OpenAI](https://openai.com/) - AIæ¨¡å‹æä¾›
- [LangChain](https://langchain.com/) - AIåº”ç”¨æ¡†æ¶
- [Flask](https://flask.palletsprojects.com/) - Python Webæ¡†æ¶

## ğŸ“ è”ç³»æ–¹å¼

å¦‚æœ‰é—®é¢˜æˆ–å»ºè®®ï¼Œè¯·é€šè¿‡ä»¥ä¸‹æ–¹å¼è”ç³»ï¼š

- é‚®ç®±: black_samurai@yeah.net
- é¡¹ç›®Issues: [GitHub Issues](https://github.com/blacksamuraiiii/wechat-daily/issues)

---

**æœ€åæ›´æ–°**: 2025-09-08
